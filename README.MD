# Desenvolvimento do Projeto

## </> &nbsp;&nbsp; Informa√ß√µes do Projeto

- Linguagem de Programa√ß√£o: Python3
- Frameworks: Django + Django Rest Framework
- Base de Dados: PostgreSQL (Relacional)
- Docker (Execu√ß√£o da aplica√ß√£o em containeres virtuais)
- Proxy Reverso: Nginx
- Servidor de Aplica√ß√£o: Gunicorn

## üìñ &nbsp;Depend√™ncias para instala√ß√£o do projeto

  - Caso ir√° executar local, instalar o banco de dados PostgreSQL com os parametros definidos em env-example
  - Caso ir√° executar via docker, o mesmo ir√° instalar as seguintes depend√™ncias automaticamente:
    - PostgreSQL
    - Gunicorn
    - Nginx
    - Bibliotecas Python atrav√©s do arquivo requirements.txt


## üíª &nbsp;&nbsp; Executando a aplica√ß√£o

**Local** : Para iniciar o projeto localmente, execute os seguintes comandos:

Executar os seguintes comandos atrav√©s do Terminal / Powershell:

    $ python -m venv .venv
    $ .\.venv\Scripts\activate (windows)
    $ source .venv/scripts/activate (linux)
    $ pip install -r requirements.txt
    $ python manage.py flush --no-input
    $ python manage.py migrate
    $ python manage.py collectstatic --no-input --clear
    $ python manage.py createsuperuser --no-input --username admin --email admin@admin.com
    $ python manage.py load_cultures
    $ python manage.py load_producers
    $ python manage.py test
    $ python manage.py runserver

Ao final dos comandos, a aplica√ß√£o poder√° ser acessada atrav√©s da url: http://localhost:8000

**Docker** : Para instalar e iniciar a aplica√ß√£o utilizando docker, apenas rode o comando abaixo:

    $ docker-compose -f docker-compose.yml up -d --build

Ao final do comando, a aplica√ß√£o poder√° ser acessada atrav√©s da url: http://localhost

**Informa√ß√µes Mockadas** : Caso deseje iniciar o projeto com v√°rios produtores j√° cadastrados, basta executar: 

    $ python manage.py load_producers

No caso de estar utilizando Docker, basta adicionar este comando no arquivo entrypoint.sh

## üåê Rotas de API
Rota                                | M√©todo |  Descri√ß√£o
------------------------------------ | ------  | -----
/  |  GET   |  Apresenta a p√°gina estat√≠stica do projeto
/api/  |  GET   |  Apresenta as API's Django Rest Framework
/admin/  |  GET   |  Apresenta a p√°gina administrativa do Django
/api-auth/login  |  GET   |  Rota para autentica√ß√£o do Django Rest Framework
/api/dashboard  |  GET   |  Retorna os dados estat√≠sticos para o dashboard
/api/producers  |  GET   |  Lista todos os produtores cadastrados
/api/producers/:id/  |  GET   |  Consulta determinado produtor atrav√©s de seu ID
/api/producers  |  POST   |  Cadastra um novo produtor
/api/producers/:id/  |  PATCH   |  Altera dados de determinado produtor atrav√©s de seu ID
/api/producers/:id/  |  DELETE   |  Deleta determinado produtor atrav√©s de seu ID
/api/cultures  |  GET   |  Lista todas as culturas cadastradas
/api/cultures/:id/  |  GET   |  Consulta determinada cultura atrav√©s de seu ID
/api/cultures  |  POST   |  Cadastra uma nova cultura
/api/cultures/:id/  |  PATCH   |  Altera dados de determinada cultura atrav√©s de seu ID
/api/cultures/:id/  |  DELETE   |  Deleta determinada cultura atrav√©s de seu ID


## ‚öôÔ∏è &nbsp;&nbsp; Testes Unit√°rios 

Execute o comando abaixo para realizar os testes unit√°rios de forma local: 

    $ python manage.py test

Caso deseje realizar os testes por unidade de m√≥dulo (culture, producer):

    $ python manage.py test culture
    $ python manage.py test producer


## üßê &nbsp;&nbsp; Observa√ß√µes: 
    - Usu√°rio e senha padr√£o (admim, admin).
    - Todas as culturas padr√µes j√° foram previamente cadastradas de forma autom√°tica.
    - Atrav√©s do arquivo postman.json, o mesmo poder√° ser importado na aplica√ß√£o Postman a fim de realizar as requisi√ß√µes e interagir via API com o projeto.


![alt text](images/postman.png)


## üí° &nbsp;&nbsp; Poss√≠veis Melhorias:
    - Adicionar permiss√µes e autentica√ß√£o JWT com certificado.
    - Adicionar Swagger ou Redoc para OpenAPI Documentation.
    - Separar cidades e estados em duas tabelas separadas.
    - Melhorar cobertura dos testes unit√°rios.
    - Desenvolver o m√≥dulo de Fazendas / Propriedades ( producers 1:N farms).
    - Criar configura√ß√µes docker para ambiente de produ√ß√£o.
    - Desenvolver aplica√ß√£o front-end (Angular, Vue, React) evitando o server-side-rendering do Django (templates).
    - Personalizar melhor o painel administrativo


## üñºÔ∏è &nbsp;&nbsp; Exemplos de P√°ginas: 

- P√°gina das Estat√≠sticas do Dashboard (/)

![alt text](images/image-5.png)

- Painel Administrativo Django (/admin/)

![alt text](images/image-2.png)

- Painel de API's Django Rest Framework (/api/)

![alt text](images/image-1.png)

- P√°gina de Autentica√ß√£o do Django Rest Framework (/api-auth/login/)

![alt text](images/image-3.png)


## üñºÔ∏è &nbsp;&nbsp; Exemplos das valida√ß√µes: 

- Valida√ß√£o no Painel Administrativo de CPF/CNPJ e √Årea:

![alt text](images/image-4.png)

- Valida√ß√£o via API de √Årea:

![alt text](images/image-22.png)

- Valida√ß√£o via API de CPF/CNPJ:

![alt text](images/image-33.png)